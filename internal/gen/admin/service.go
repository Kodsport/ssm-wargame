// Code generated by goa v3.5.2, DO NOT EDIT.
//
// admin service
//
// Command:
// $ goa gen github.com/sakerhetsm/ssm-wargame/internal/design -o internal/

package admin

import (
	"context"

	adminviews "github.com/sakerhetsm/ssm-wargame/internal/gen/admin/views"
	goa "goa.design/goa/v3/pkg"
	"goa.design/goa/v3/security"
)

// Service is the admin service interface.
type Service interface {
	// ListChallenges implements ListChallenges.
	ListChallenges(context.Context, *ListChallengesPayload) (res SsmChallengeCollection, err error)
	// CreateChallenge implements CreateChallenge.
	CreateChallenge(context.Context, *CreateChallengePayload) (err error)
	// PresignChallFileUpload implements PresignChallFileUpload.
	PresignChallFileUpload(context.Context, *PresignChallFileUploadPayload) (res *PresignChallFileUploadResult, err error)
	// ListMonthlyChallenges implements ListMonthlyChallenges.
	ListMonthlyChallenges(context.Context, *ListMonthlyChallengesPayload) (res []*MonthlyChallengeMeta, err error)
	// DeleteMonthlyChallenge implements DeleteMonthlyChallenge.
	DeleteMonthlyChallenge(context.Context, *DeleteMonthlyChallengePayload) (err error)
	// CreateMonthlyChallenge implements CreateMonthlyChallenge.
	CreateMonthlyChallenge(context.Context, *CreateMonthlyChallengePayload) (err error)
	// ListUsers implements ListUsers.
	ListUsers(context.Context, *ListUsersPayload) (res []*SsmUser, err error)
}

// Auther defines the authorization functions to be implemented by the service.
type Auther interface {
	// JWTAuth implements the authorization logic for the JWT security scheme.
	JWTAuth(ctx context.Context, token string, schema *security.JWTScheme) (context.Context, error)
}

// ServiceName is the name of the service as defined in the design. This is the
// same value that is set in the endpoint request contexts under the ServiceKey
// key.
const ServiceName = "admin"

// MethodNames lists the service method names as defined in the design. These
// are the same values that are set in the endpoint request contexts under the
// MethodKey key.
var MethodNames = [7]string{"ListChallenges", "CreateChallenge", "PresignChallFileUpload", "ListMonthlyChallenges", "DeleteMonthlyChallenge", "CreateMonthlyChallenge", "ListUsers"}

// ListChallengesPayload is the payload type of the admin service
// ListChallenges method.
type ListChallengesPayload struct {
	Token string
}

// SsmChallengeCollection is the result type of the admin service
// ListChallenges method.
type SsmChallengeCollection []*SsmChallenge

// CreateChallengePayload is the payload type of the admin service
// CreateChallenge method.
type CreateChallengePayload struct {
	// A unique string that can be used in URLs
	Slug string
	// Title displayed to user
	Title string
	// A short text describing the challenge
	Description string
	// The number of points given to the solver
	Score int32
	Token string
}

// PresignChallFileUploadPayload is the payload type of the admin service
// PresignChallFileUpload method.
type PresignChallFileUploadPayload struct {
	// MD5 hash of the file content in base64
	Md5      string
	Filename string
	Token    string
	// ID of a challenge
	ChallengeID string
}

// PresignChallFileUploadResult is the result type of the admin service
// PresignChallFileUpload method.
type PresignChallFileUploadResult struct {
	// Signed PutObject URL
	URL string
}

// ListMonthlyChallengesPayload is the payload type of the admin service
// ListMonthlyChallenges method.
type ListMonthlyChallengesPayload struct {
	Token string
}

// DeleteMonthlyChallengePayload is the payload type of the admin service
// DeleteMonthlyChallenge method.
type DeleteMonthlyChallengePayload struct {
	Token string
	// ID of a challenge
	ChallengeID string
}

// CreateMonthlyChallengePayload is the payload type of the admin service
// CreateMonthlyChallenge method.
type CreateMonthlyChallengePayload struct {
	Token string
	// The month(s) that the challenge is assigned for
	DisplayMonth string
	// Starting date of the monthly challenge
	StartDate string
	// Ending date of the monthly challenge
	EndDate string
	// ID of a challenge
	ChallengeID string
}

// ListUsersPayload is the payload type of the admin service ListUsers method.
type ListUsersPayload struct {
	Token string
}

// A Wargame challenge
type SsmChallenge struct {
	ID string
	// A unique string that can be used in URLs
	Slug string
	// Title displayed to user
	Title string
	// A short text describing the challenge
	Description string
	// The number of points given to the solver
	Score     int32
	Services  []*ChallengeService
	Files     []*ChallengeFiles
	Published bool
	// The numer of people who solved the challenge
	Solves int64
}

type ChallengeService struct {
}

type ChallengeFiles struct {
	Filename string
	URL      string
}

type MonthlyChallengeMeta struct {
	// The month(s) that the challenge is assigned for
	DisplayMonth string
	// Starting date of the monthly challenge
	StartDate string
	// Ending date of the monthly challenge
	EndDate string
}

type SsmUser struct {
	ID        string
	Email     string
	FirstName string
	LastName  string
}

// MakeUnauthorized builds a goa.ServiceError from an error.
func MakeUnauthorized(err error) *goa.ServiceError {
	return &goa.ServiceError{
		Name:    "unauthorized",
		ID:      goa.NewErrorID(),
		Message: err.Error(),
	}
}

// MakeNotFound builds a goa.ServiceError from an error.
func MakeNotFound(err error) *goa.ServiceError {
	return &goa.ServiceError{
		Name:    "not_found",
		ID:      goa.NewErrorID(),
		Message: err.Error(),
	}
}

// MakeBadRequest builds a goa.ServiceError from an error.
func MakeBadRequest(err error) *goa.ServiceError {
	return &goa.ServiceError{
		Name:    "bad_request",
		ID:      goa.NewErrorID(),
		Message: err.Error(),
	}
}

// NewSsmChallengeCollection initializes result type SsmChallengeCollection
// from viewed result type SsmChallengeCollection.
func NewSsmChallengeCollection(vres adminviews.SsmChallengeCollection) SsmChallengeCollection {
	return newSsmChallengeCollection(vres.Projected)
}

// NewViewedSsmChallengeCollection initializes viewed result type
// SsmChallengeCollection from result type SsmChallengeCollection using the
// given view.
func NewViewedSsmChallengeCollection(res SsmChallengeCollection, view string) adminviews.SsmChallengeCollection {
	p := newSsmChallengeCollectionView(res)
	return adminviews.SsmChallengeCollection{Projected: p, View: "default"}
}

// newSsmChallengeCollection converts projected type SsmChallengeCollection to
// service type SsmChallengeCollection.
func newSsmChallengeCollection(vres adminviews.SsmChallengeCollectionView) SsmChallengeCollection {
	res := make(SsmChallengeCollection, len(vres))
	for i, n := range vres {
		res[i] = newSsmChallenge(n)
	}
	return res
}

// newSsmChallengeCollectionView projects result type SsmChallengeCollection to
// projected type SsmChallengeCollectionView using the "default" view.
func newSsmChallengeCollectionView(res SsmChallengeCollection) adminviews.SsmChallengeCollectionView {
	vres := make(adminviews.SsmChallengeCollectionView, len(res))
	for i, n := range res {
		vres[i] = newSsmChallengeView(n)
	}
	return vres
}

// newSsmChallenge converts projected type SsmChallenge to service type
// SsmChallenge.
func newSsmChallenge(vres *adminviews.SsmChallengeView) *SsmChallenge {
	res := &SsmChallenge{}
	if vres.ID != nil {
		res.ID = *vres.ID
	}
	if vres.Slug != nil {
		res.Slug = *vres.Slug
	}
	if vres.Title != nil {
		res.Title = *vres.Title
	}
	if vres.Description != nil {
		res.Description = *vres.Description
	}
	if vres.Score != nil {
		res.Score = *vres.Score
	}
	if vres.Published != nil {
		res.Published = *vres.Published
	}
	if vres.Solves != nil {
		res.Solves = *vres.Solves
	}
	if vres.Services != nil {
		res.Services = make([]*ChallengeService, len(vres.Services))
		for i, val := range vres.Services {
			res.Services[i] = transformAdminviewsChallengeServiceViewToChallengeService(val)
		}
	}
	if vres.Files != nil {
		res.Files = make([]*ChallengeFiles, len(vres.Files))
		for i, val := range vres.Files {
			res.Files[i] = transformAdminviewsChallengeFilesViewToChallengeFiles(val)
		}
	}
	return res
}

// newSsmChallengeView projects result type SsmChallenge to projected type
// SsmChallengeView using the "default" view.
func newSsmChallengeView(res *SsmChallenge) *adminviews.SsmChallengeView {
	vres := &adminviews.SsmChallengeView{
		ID:          &res.ID,
		Slug:        &res.Slug,
		Title:       &res.Title,
		Description: &res.Description,
		Score:       &res.Score,
		Published:   &res.Published,
		Solves:      &res.Solves,
	}
	if res.Services != nil {
		vres.Services = make([]*adminviews.ChallengeServiceView, len(res.Services))
		for i, val := range res.Services {
			vres.Services[i] = transformChallengeServiceToAdminviewsChallengeServiceView(val)
		}
	}
	if res.Files != nil {
		vres.Files = make([]*adminviews.ChallengeFilesView, len(res.Files))
		for i, val := range res.Files {
			vres.Files[i] = transformChallengeFilesToAdminviewsChallengeFilesView(val)
		}
	}
	return vres
}

// transformAdminviewsChallengeServiceViewToChallengeService builds a value of
// type *ChallengeService from a value of type *adminviews.ChallengeServiceView.
func transformAdminviewsChallengeServiceViewToChallengeService(v *adminviews.ChallengeServiceView) *ChallengeService {
	if v == nil {
		return nil
	}
	res := &ChallengeService{}

	return res
}

// transformAdminviewsChallengeFilesViewToChallengeFiles builds a value of type
// *ChallengeFiles from a value of type *adminviews.ChallengeFilesView.
func transformAdminviewsChallengeFilesViewToChallengeFiles(v *adminviews.ChallengeFilesView) *ChallengeFiles {
	if v == nil {
		return nil
	}
	res := &ChallengeFiles{
		Filename: *v.Filename,
		URL:      *v.URL,
	}

	return res
}

// transformChallengeServiceToAdminviewsChallengeServiceView builds a value of
// type *adminviews.ChallengeServiceView from a value of type *ChallengeService.
func transformChallengeServiceToAdminviewsChallengeServiceView(v *ChallengeService) *adminviews.ChallengeServiceView {
	if v == nil {
		return nil
	}
	res := &adminviews.ChallengeServiceView{}

	return res
}

// transformChallengeFilesToAdminviewsChallengeFilesView builds a value of type
// *adminviews.ChallengeFilesView from a value of type *ChallengeFiles.
func transformChallengeFilesToAdminviewsChallengeFilesView(v *ChallengeFiles) *adminviews.ChallengeFilesView {
	if v == nil {
		return nil
	}
	res := &adminviews.ChallengeFilesView{
		Filename: &v.Filename,
		URL:      &v.URL,
	}

	return res
}
